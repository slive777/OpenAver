<p align="center">
  <img src="docs/logo.svg" alt="OpenAver Logo" width="200">
</p>

<h1 align="center">OpenAver</h1>

<p align="center">
  <strong>ç¾ä»£åŒ–çš„ JAV å½±ç‰‡å…ƒæ•¸æ“šç®¡ç†å·¥å…· (Modern JAV Metadata Manager)</strong>
</p>

OpenAver æ˜¯ä¸€å€‹åŸºæ–¼ Web æŠ€è¡“çš„æ¡Œé¢æ‡‰ç”¨ç¨‹å¼ï¼Œæ—¨åœ¨å¹«åŠ©æ‚¨è¼•é¬†ç®¡ç†ã€åˆ®å‰Šå’Œç”Ÿæˆ JAV å½±ç‰‡çš„å…ƒæ•¸æ“šèˆ‡å±•ç¤ºåˆ—è¡¨ã€‚

![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)
![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-green.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)
![Tests](https://github.com/slive777/OpenAver/actions/workflows/test.yml/badge.svg)
![GitHub Release](https://img.shields.io/github/v/release/slive777/OpenAver)

## ğŸ“¸ æˆªåœ–é è¦½

![Home](docs/screenshots/home.jpg)

<details>
<summary>æ›´å¤šæˆªåœ–</summary>

![Demo](docs/screenshots/demo.gif)

| æœå°‹çµæœ | Showcase Grid | Showcase è©³ç´° |
|----------|---------------|---------------|
| ![Search](docs/screenshots/search-detail.png) | ![Grid](docs/screenshots/showcase-grid.png) | ![Detail](docs/screenshots/showcase-detail.png) |

</details>

## âš ï¸ å…è²¬è²æ˜

æœ¬å°ˆæ¡ˆåƒ…ä¾›å€‹äººå­¸ç¿’ç ”ç©¶ä½¿ç”¨ï¼Œè«‹ä½¿ç”¨è€…éµå®ˆï¼š
- å°Šé‡ç¶²ç«™æœå‹™æ¢æ¬¾
- åˆç†æ§åˆ¶è«‹æ±‚é »ç‡
- ä¸ç”¨æ–¼å•†æ¥­ç›®çš„

ä½¿ç”¨æœ¬å°ˆæ¡ˆé€ æˆçš„ä»»ä½•å¾Œæœç”±ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ“”ã€‚

## ğŸ”’ éš±ç§è²æ˜

OpenAver æ˜¯ç´”æœ¬åœ°æ‡‰ç”¨ç¨‹å¼ï¼š
- âœ… ä¸è’é›†ä½¿ç”¨è€…è³‡æ–™
- âœ… ä¸ä¸Šå‚³æª”æ¡ˆè³‡è¨Šåˆ°é ç«¯ä¼ºæœå™¨
- âœ… æ‰€æœ‰æ“ä½œåœ¨æ‚¨çš„é›»è…¦æœ¬åœ°åŸ·è¡Œ
- âš ï¸ ç¶²è·¯è«‹æ±‚åƒ…ç”¨æ–¼åˆ®å‰Šå…¬é–‹å½±ç‰‡å…ƒæ•¸æ“š

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ” Spotlight Search (æœå°‹)
- **å¤šä¾†æºèšåˆ**: åŒæ™‚æœå°‹ JavBus, Jav321, JavDB ç­‰å¤šå€‹ä¾†æºã€‚
- **Gallery Style**: ç¾ä»£åŒ–çš„ Hero Detail ä»‹é¢ï¼Œä»¥å¤§åœ–å’Œæ¯›ç»ç’ƒç‰¹æ•ˆå‘ˆç¾å½±ç‰‡è³‡è¨Šã€‚
- **æ™ºæ…§æœå°‹**: æ”¯æ´ç•ªè™Ÿè‡ªå‹•æ¨™æº–åŒ–ã€å‰ç¶´æœå°‹ã€å¥³å„ªæœå°‹ã€‚
- **å¥³å„ªç•«å»Šæ¨¡å¼ (Beta)**: å¥³å„ªæœå°‹çµæœ > 10 ç‰‡æ™‚è‡ªå‹•åˆ‡æ›ç‚º Gallery ç€è¦½ï¼Œé¡¯ç¤ºå¥³å„ªå€‹äººè³‡æ–™ Hero Cardã€‚
- **æœ¬åœ°æª”æ¡ˆæœå°‹å„ªåŒ–**:
  - æ‹–å…¥æª”æ¡ˆè‡ªå‹•éæ¿¾ï¼ˆå‰¯æª”å + å¤§å°ï¼‰
  - æ‰¹æ¬¡æœå°‹ï¼ˆ20 å€‹ä¸€æ‰¹ï¼Œä¸¦ç™¼ 2 å€‹ï¼‰
  - æš«åœ/ç¹¼çºŒåŠŸèƒ½
  - æˆ‘çš„æœ€æ„›è³‡æ–™å¤¾ä¸€éµè¼‰å…¥

### ğŸ“ Gallery Generator (åˆ—è¡¨ç”Ÿæˆ)
- **éœæ…‹ HTML**: æƒææœ¬åœ°å½±ç‰‡è³‡æ–™å¤¾ï¼Œç”Ÿæˆç²¾ç¾çš„éœæ…‹ HTML ç´¢å¼•æª”ã€‚
- **Mini-Terminal**: å…§åµŒå¼çµ‚ç«¯æ©Ÿè¦–çª—ï¼Œå³æ™‚é¡¯ç¤ºæƒæèˆ‡è™•ç†é€²åº¦ã€‚
- **NFO è£œå…¨**: è‡ªå‹•æª¢æ¸¬ä¸¦è£œå…¨ç¼ºå¤±çš„ NFO æª”æ¡ˆã€‚

### âš™ï¸ Settings (è¨­å®š)
- **Dark Mode**: å…¨ç«™æ”¯æ´æ·±è‰²æ¨¡å¼ï¼Œä¸¦è‡ªå‹•åŒæ­¥è‡³ç”Ÿæˆçš„ Viewerã€‚
- **ç¿»è­¯æœå‹™**: æ”¯æ´ Ollamaï¼ˆæœ¬åœ°ï¼‰å’Œ Geminiï¼ˆGoogleï¼‰å…©ç¨®ç¿»è­¯æä¾›å•†ã€‚
- **è·¯å¾‘ç®¡ç†**: éˆæ´»è¨­å®šè¼¸å‡ºè·¯å¾‘èˆ‡æª”æ¡ˆå‘½åè¦å‰‡ã€‚
- **æˆ‘çš„æœ€æ„›è³‡æ–™å¤¾**: è¨­å®šå¸¸ç”¨è³‡æ–™å¤¾ï¼Œä¸€éµè¼‰å…¥ä¸¦è‡ªå‹•æœå°‹ã€‚
- **æª”æ¡ˆéæ¿¾**: è¨­å®šæœ€å°å½±ç‰‡å°ºå¯¸ (MB)ï¼Œè‡ªå‹•æ’é™¤éå°æª”æ¡ˆã€‚

### ğŸŒ ç¿»è­¯åŠŸèƒ½

OpenAver æ”¯æ´å…©ç¨®ç¿»è­¯æä¾›å•†ï¼š

| æä¾›å•† | ç‰¹é» | é€Ÿåº¦ |
|--------|------|------|
| **Ollamaï¼ˆæœ¬åœ°ï¼‰** | å…è²»ã€ç„¡ API é™åˆ¶ã€éœ€æœ¬åœ° GPU | ~0.5 ç§’/ç‰‡ |
| **Geminiï¼ˆGoogleï¼‰** | é›²ç«¯ APIã€å…è²»é¡åº¦ 15 RPM | ~0.1 ç§’/ç‰‡ |

**âš ï¸ Gemini API Key å®‰å…¨æç¤º**

- API Key ä»¥æ˜æ–‡å­˜å„²åœ¨ `web/config.json`
- **è«‹å‹¿å°‡ config.json åˆ†äº«çµ¦ä»–äººæˆ–ä¸Šå‚³è‡³å…¬é–‹ä½ç½®**
- å¦‚éœ€æ’¤éŠ·ï¼šå‰å¾€ [Google AI Studio](https://aistudio.google.com/apikey) é‡æ–°ç”Ÿæˆ

## ğŸ› ï¸ æŠ€è¡“æ¶æ§‹

- **Backend**: FastAPI (Python)
- **Frontend**: Jinja2 + Bootstrap 5 + Custom CSS (Gallery Design System)
- **Desktop**: PyWebView (Windows/macOS)
- **Testing**: Pytest

## ğŸ“¥ ä¸‹è¼‰

å¾ [GitHub Releases](https://github.com/slive777/OpenAver/releases/latest) ä¸‹è¼‰æœ€æ–°ç‰ˆæœ¬ï¼š

| å¹³å° | æª”æ¡ˆ | ç‹€æ…‹ |
|------|------|------|
| **Windows x64** | `OpenAver-vX.X.X-Windows-x64.zip` | âœ… ç©©å®šç‰ˆ |
| **macOS arm64** | `OpenAver-vX.X.X-macOS-arm64-alpha.zip` | ğŸ§ª Alpha |

### macOS é¦–æ¬¡åŸ·è¡Œ (é‡è¦)

ç”±æ–¼æ²’æœ‰ Apple ç°½åï¼ŒmacOS æœƒé˜»æ“‹é¦–æ¬¡åŸ·è¡Œï¼š

1. å³éµé»æ“Š `OpenAver.command`
2. é¸æ“‡ã€Œ**æ‰“é–‹**ã€(Open)
3. åœ¨å½ˆå‡ºå°è©±æ¡†ä¸­é»æ“Šã€Œ**æ‰“é–‹**ã€

> âš ï¸ macOS ç‰ˆæœ¬ç‚º Alpha æ¸¬è©¦ï¼Œåƒ…æ”¯æ´ Apple Silicon (M1/M2/M3/M4)ã€‚
> å¦‚é‡å•é¡Œè«‹è‡³ [GitHub Issues](https://github.com/slive777/OpenAver/issues) å›å ±ã€‚

---

## ğŸš€ å¿«é€Ÿé–‹å§‹ï¼ˆåŸå§‹ç¢¼ï¼‰

### å‰ç½®éœ€æ±‚
- Python 3.10+ (åŸå§‹ç¢¼åŸ·è¡Œ)
- Chrome/Edge (ç”¨æ–¼ PyWebView)
- **Microsoft Edge WebView2 Runtime** (Windows 10/VM å¿…å‚™)

### å®‰è£
```bash
# 1. Clone å°ˆæ¡ˆ
git clone https://github.com/slive777/OpenAver.git
cd OpenAver

# 2. å»ºç«‹è™›æ“¬ç’°å¢ƒ
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 3. å®‰è£ä¾è³´
pip install -r requirements.txt
```

### å•Ÿå‹•
```bash
# é–‹ç™¼æ¨¡å¼ (Hot Reload)
uvicorn web.app:app --reload --host 0.0.0.0 --port 8000

# æ¡Œé¢æ¨¡å¼ (Windows)
python windows/launcher.py
```

## â“ ç–‘é›£æ’è§£ (Troubleshooting)

### 1. ç¨‹å¼ç„¡æ³•å•Ÿå‹• / é–ƒé€€ (Windows)
**åŸå› **: Windows å®‰å…¨æ©Ÿåˆ¶ (Mark of the Web) å°é–äº†å¾ç¶²è·¯ä¸‹è¼‰çš„åŸ·è¡Œæª”æˆ– DLLã€‚
**è§£æ³•**:
1. å°ä¸‹è¼‰çš„ `OpenAver-Windows-x64.zip` é»æ“Š **å³éµ** -> **å…§å®¹**ã€‚
2. åœ¨ä¸‹æ–¹å‹¾é¸ **ã€Œè§£é™¤å°é– (Unblock)ã€**ï¼Œç„¶å¾ŒæŒ‰ç¢ºå®šã€‚
3. é‡æ–°è§£å£“ç¸®ä¸¦åŸ·è¡Œ `OpenAver.bat`ã€‚
*æˆ–è€…ä½¿ç”¨ 7-Zip è»Ÿé«”é€²è¡Œè§£å£“ç¸®ï¼Œé€šå¸¸å¯é¿é–‹æ­¤å•é¡Œã€‚*

### 2. ä»‹é¢é¡¯ç¤ºç•°å¸¸ / ç©ºç™½ / æ²’æœ‰æ¯›ç»ç’ƒç‰¹æ•ˆ
**åŸå› **: ç¼ºå°‘ WebView2 Runtime æˆ– GPU åŠ é€Ÿæ”¯æ´ä¸è¶³ï¼ˆå¸¸è¦‹æ–¼ Windows 10 æˆ–è™›æ“¬æ©Ÿï¼‰ã€‚
**è§£æ³•**:
è«‹ä¸‹è¼‰ä¸¦å®‰è£ [Microsoft Edge WebView2 Runtime](https://go.microsoft.com/fwlink/p/?LinkId=2124703)ã€‚

### 3. macOS ç„¡æ³•é–‹å•Ÿ / å®‰å…¨æ€§è­¦å‘Š
**åŸå› **: macOS Gatekeeper é˜»æ“‹æœªç°½åçš„æ‡‰ç”¨ç¨‹å¼ã€‚
**è§£æ³•**:
1. å³éµé»æ“Š `OpenAver.command` â†’ é¸æ“‡ã€Œæ‰“é–‹ã€
2. åœ¨å½ˆå‡ºçš„å°è©±æ¡†ä¸­å†æ¬¡é»æ“Šã€Œæ‰“é–‹ã€
3. åªéœ€è¨­å®šä¸€æ¬¡ï¼Œä¹‹å¾Œå¯æ­£å¸¸é›™æ“ŠåŸ·è¡Œ

## ğŸ’¬ ç¤¾ç¾¤

åŠ å…¥ [Telegram ç¾¤çµ„](https://t.me/+J-U2l96gv0FjZTBl) èˆ‡å…¶ä»–ä½¿ç”¨è€…äº¤æµè¨è«–ï¼

---

## ğŸ› å›å ±å•é¡Œ

å¦‚æœæ‚¨é‡åˆ°å•é¡Œæˆ–ç™¼ç¾ Bugï¼Œè«‹å”åŠ©å›å ±ï¼š

### å›å ±æ–¹å¼
1. å‰å¾€ [GitHub Issues](https://github.com/slive777/OpenAver/issues)
2. é»æ“Šã€ŒNew Issueã€å»ºç«‹æ–°å•é¡Œ
3. è«‹æä¾›ä»¥ä¸‹è³‡è¨Šï¼š
   - å•é¡Œæè¿°ï¼ˆç™¼ç”Ÿä»€éº¼éŒ¯èª¤ï¼Ÿï¼‰
   - é‡ç¾æ­¥é©Ÿï¼ˆå¦‚ä½•è§¸ç™¼é€™å€‹å•é¡Œï¼Ÿï¼‰
   - æ‚¨çš„ç’°å¢ƒï¼ˆWindows ç‰ˆæœ¬ã€æ˜¯å¦ä½¿ç”¨æ‰“åŒ…ç‰ˆï¼‰
   - **æ—¥èªŒæª”æ¡ˆ**ï¼ˆå¦‚æœæœ‰ï¼‰

### å–å¾—æ—¥èªŒæª”æ¡ˆï¼ˆWindows æ‰“åŒ…ç‰ˆï¼‰
1. åŸ·è¡Œ `OpenAver_Debug.bat`
2. é‡ç¾å•é¡Œ
3. æ—¥èªŒä½ç½®ï¼š`%USERPROFILE%\OpenAver\logs\debug.log`
4. å°‡æ—¥èªŒæª”æ¡ˆé™„åŠ åˆ° Issue

---

## ğŸ§ª åŸ·è¡Œæ¸¬è©¦

æœ¬å°ˆæ¡ˆåŒ…å« API æ•´åˆæ¸¬è©¦èˆ‡æ ¸å¿ƒé‚è¼¯å–®å…ƒæ¸¬è©¦ã€‚

```bash
source venv/bin/activate
pytest
```

## ğŸ“‚ ç›®éŒ„çµæ§‹

```
OpenAver/
â”œâ”€â”€ web/                # Web GUI (FastAPI)
â”‚   â”œâ”€â”€ routers/        # API Endpoints (Search, Config, Scraper, AVList)
â”‚   â”œâ”€â”€ templates/      # HTML Templates (Gallery Style)
â”‚   â””â”€â”€ static/         # CSS/JS Assets (Modular JS, Theme CSS)
â”œâ”€â”€ core/               # æ ¸å¿ƒé‚è¼¯
â”‚   â”œâ”€â”€ scraper.py              # åˆ®å‰Šå™¨ (JavBus/Jav321/JavDB)
â”‚   â”œâ”€â”€ actress_scraper.py      # å¥³å„ªçˆ¬èŸ²
â”‚   â”œâ”€â”€ search_gallery_service.py # Gallery Service
â”‚   â”œâ”€â”€ gallery_generator.py    # Gallery HTML ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ organizer.py            # æª”æ¡ˆæ•´ç†
â”‚   â””â”€â”€ path_utils.py           # è·¨å¹³å°è·¯å¾‘è™•ç†
â”œâ”€â”€ tests/              # æ¸¬è©¦ä»£ç¢¼ (Pytest)
â””â”€â”€ windows/            # Windows å•Ÿå‹•å™¨ (PyWebView)
```

## æ‰“åŒ… Windows æ‡‰ç”¨ç¨‹å¼

```bash
# ç¢ºä¿åœ¨ venv ç’°å¢ƒä¸‹åŸ·è¡Œ
source venv/bin/activate
python build.py
```

## ğŸ™ è‡´è¬ (Acknowledgements)

OpenAver ä½¿ç”¨ä¸¦æ„Ÿè¬ä»¥ä¸‹é–‹æºå°ˆæ¡ˆï¼š

- **[jvav](https://github.com/akynazh/jvav)** - JAV å…ƒæ•¸æ“šåˆ®å‰Šå·¥å…·åº«ï¼Œæä¾› JavBus/JavDB/JavLib ç­‰å¤šä¾†æºæ”¯æ´
- **[FastAPI](https://fastapi.tiangolo.com/)** - ç¾ä»£åŒ–çš„ Python Web æ¡†æ¶
- **[PyWebView](https://pywebview.flowrl.com/)** - è¼•é‡ç´šçš„è·¨å¹³å°æ¡Œé¢æ‡‰ç”¨æ¡†æ¶
- **[Bootstrap](https://getbootstrap.com/)** - å‰ç«¯ UI æ¡†æ¶

ç‰¹åˆ¥æ„Ÿè¬æ‰€æœ‰ç‚ºé€™äº›å°ˆæ¡ˆåšå‡ºè²¢ç»çš„é–‹ç™¼è€…å€‘ã€‚

## License

MIT License
