{% extends "base.html" %}

{% block title %}Design System - OpenAver{% endblock %}

{% block extra_css %}
<link href="/static/css/pages/design-system.css" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="ds-layout">
    <!-- å·¦å´ TOC å´æ¬„ -->
    <nav class="ds-toc">
        <span class="ds-toc-title">Contents</span>
        <a href="#colors">Colors & Typography</a>
        <a href="#fluent">Fluent Tokens</a>
        <a href="#buttons">Buttons</a>
        <a href="#forms">Form Controls</a>
        <a href="#state-matrix">State Matrix</a>
        <a href="#cards">Cards</a>
        <a href="#av-cards">AV Card Variants</a>
        <a href="#file-components">File Components</a>
        <a href="#drag-overlay">Search Drag Overlay</a>
        <a href="#progress">Progress & Feedback</a>
        <a href="#navigation">Navigation</a>
        <a href="#rotating-border">Rotating Border</a>
        <a href="#feedback">Feedback</a>
    </nav>

    <!-- å³å´å…§å®¹ -->
    <div class="ds-content">
        <!-- é é¢æ¨™é¡Œ -->
        <header class="ds-header">
            <div class="ds-header-content">
                <div class="ds-header-text">
                    <h1>OpenAver Design System</h1>
                    <p class="ds-subtitle">DaisyUI + Fluent Design 2 å…ƒä»¶åº«</p>
                </div>

                <!-- Theme Toggle Button -->
                <div class="ds-theme-toggle">
                    <button class="theme-toggle-btn"
                            @click="theme = (theme === 'wireframe' ? 'dim' : 'wireframe')"
                            :title="theme === 'wireframe' ? 'åˆ‡æ›è‡³æ·±è‰²æ¨¡å¼' : 'åˆ‡æ›è‡³æ·ºè‰²æ¨¡å¼'"
                            type="button">
                        <i class="bi" :class="theme === 'wireframe' ? 'bi-moon-stars' : 'bi-sun'"></i>
                        <span class="theme-toggle-label" x-text="theme === 'wireframe' ? 'Wireframe' : 'Dim'"></span>
                    </button>
                </div>
            </div>
        </header>

        <!-- å€å¡Š 1: Colors & Typography (glass æ¨£å¼) -->
        <section id="colors" class="ds-section glass">
            <h2>Colors & Typography</h2>

            <!-- ä¸»é¡Œè‰²ç›¤ï¼ˆå„€è¡¨æ¿åŒ–ï¼‰ -->
            <div class="ds-subsection">
                <h3>Theme Colors</h3>

                <!-- ç¬¬ 1 çµ„ï¼šDaisyUI åŸºç¤è‰²ï¼ˆBase Paletteï¼‰ -->
                <h4 style="font-size: 0.75rem; font-weight: 500; color: var(--text-muted); margin: 1rem 0 0.75rem 0; letter-spacing: 0.05em;">DaisyUI Base Palette</h4>
                <div class="ds-color-grid">
                    <div class="ds-color-swatch" style="background: var(--color-base-100);">
                        <div class="ds-color-info">
                            <span class="ds-color-name">--color-base-100</span>
                            <code class="ds-color-hex" data-var="--color-base-100"></code>
                            <span class="ds-color-usage">Lightest background</span>
                        </div>
                    </div>
                    <div class="ds-color-swatch" style="background: var(--color-base-200);">
                        <div class="ds-color-info">
                            <span class="ds-color-name">--color-base-200</span>
                            <code class="ds-color-hex" data-var="--color-base-200"></code>
                            <span class="ds-color-usage">Card background</span>
                        </div>
                    </div>
                    <div class="ds-color-swatch" style="background: var(--color-base-300);">
                        <div class="ds-color-info">
                            <span class="ds-color-name">--color-base-300</span>
                            <code class="ds-color-hex" data-var="--color-base-300"></code>
                            <span class="ds-color-usage">Dropdown/Modal</span>
                        </div>
                    </div>
                    <div class="ds-color-swatch" style="background: var(--color-primary);">
                        <div class="ds-color-info">
                            <span class="ds-color-name">--color-primary</span>
                            <code class="ds-color-hex" data-var="--color-primary"></code>
                            <span class="ds-color-usage">Primary actions</span>
                        </div>
                    </div>
                </div>

                <!-- ç¬¬ 2 çµ„ï¼šSurface Hierarchyï¼ˆC.2 æ–°å¢è®Šæ•¸ï¼‰ -->
                <h4 style="font-size: 0.75rem; font-weight: 500; color: var(--text-muted); margin: 1.5rem 0 0.75rem 0; letter-spacing: 0.05em;">Surface Hierarchy (NEW in C.2)</h4>
                <div class="ds-color-grid">
                    <div class="ds-color-swatch" style="background: var(--surface-0);">
                        <div class="ds-color-info">
                            <span class="ds-color-name">--surface-0</span>
                            <code class="ds-color-hex" data-var="--surface-0"></code>
                            <span class="ds-color-usage">Body background</span>
                        </div>
                    </div>
                    <div class="ds-color-swatch" style="background: var(--surface-1);">
                        <div class="ds-color-info">
                            <span class="ds-color-name">--surface-1</span>
                            <code class="ds-color-hex" data-var="--surface-1"></code>
                            <span class="ds-color-usage">Card, Sidebar</span>
                        </div>
                    </div>
                    <div class="ds-color-swatch" style="background: var(--surface-2);">
                        <div class="ds-color-info">
                            <span class="ds-color-name">--surface-2</span>
                            <code class="ds-color-hex" data-var="--surface-2"></code>
                            <span class="ds-color-usage">Dropdown, Modal</span>
                        </div>
                    </div>
                </div>

                <!-- Stroke & Glow å€å¡Šå·²ç§»é™¤ï¼šç½®ä¸­å•é¡Œå¾…è§£æ±º -->
            </div>

            <!-- æ–‡å­—è‰² -->
            <div class="ds-subsection">
                <h3>Text Colors</h3>
                <div class="ds-text-samples">
                    <p><span style="color: var(--text-primary); font-weight: 600;">Primary Text</span> <code style="color: var(--text-muted); font-size: 0.85rem;">(--text-primary)</code></p>
                    <p><span style="color: var(--text-secondary);">Secondary Text</span> <code style="color: var(--text-muted); font-size: 0.85rem;">(--text-secondary)</code></p>
                    <p><span style="color: var(--text-muted);">Muted Text</span> <code style="color: var(--text-muted); font-size: 0.85rem;">(--text-muted)</code></p>
                </div>
            </div>

            <!-- å­—å‹ç­‰ç´š -->
            <div class="ds-subsection">
                <h3>Typography Scale</h3>
                <div class="ds-typography">
                    <h1>Heading 1 - Space Grotesk 700</h1>
                    <h2>Heading 2 - Space Grotesk 600</h2>
                    <h3>Heading 3 - Plus Jakarta Sans 600</h3>
                    <h4>Heading 4 - Plus Jakarta Sans 500</h4>
                    <p>Body Text - Plus Jakarta Sans 400, 1rem/1.5</p>
                    <small>Small Text - 0.875rem</small>
                </div>
            </div>
        </section>

        <!-- å€å¡Š 2: Fluent Design Tokens (accent-bar æ¨£å¼) -->
        <section id="fluent" class="ds-section accent-bar">
            <h2>Fluent Design Tokens</h2>

            <!-- åœ“è§’å±•ç¤º -->
            <div class="ds-subsection">
                <h3>Border Radius</h3>
                <div class="ds-radius-grid">
                    <div class="ds-radius-item fluent-rounded-sm">
                        <span>sm (2px)</span>
                    </div>
                    <div class="ds-radius-item fluent-rounded-md">
                        <span>md (4px)</span>
                    </div>
                    <div class="ds-radius-item fluent-rounded-lg">
                        <span>lg (8px)</span>
                    </div>
                    <div class="ds-radius-item fluent-rounded-xl">
                        <span>xl (12px)</span>
                    </div>
                </div>
            </div>

            <!-- é™°å½±å±•ç¤º -->
            <div class="ds-subsection">
                <h3>Elevation (Shadow)</h3>
                <div class="ds-shadow-grid">
                    <div class="ds-shadow-item fluent-shadow-2">shadow-2</div>
                    <div class="ds-shadow-item fluent-shadow-4">shadow-4</div>
                    <div class="ds-shadow-item fluent-shadow-8">shadow-8</div>
                    <div class="ds-shadow-item fluent-shadow-16">shadow-16</div>
                </div>
                <p class="ds-note">Light/Dark æ¨¡å¼ä¸‹é™°å½±æ·±åº¦è‡ªå‹•èª¿æ•´</p>
            </div>

            <!-- å®Œæ•´ Elevation Scale å±•ç¤º -->
            <div class="ds-subsection">
                <h3>Elevation Scale (Complete)</h3>
                <p class="ds-desc">Fluent Design 2 é›™å±¤é™°å½±ç³»çµ±ï¼ŒLight/Dark æ¨¡å¼è‡ªå‹•èª¿æ•´æ·±åº¦</p>

                <div class="ds-elevation-grid">
                    <!-- shadow-2 -->
                    <div class="ds-elevation-item fluent-shadow-2">
                        <span class="ds-elevation-label">shadow-2</span>
                        <span class="ds-elevation-semantic">Small</span>
                        <span class="ds-elevation-usage">Button hover</span>
                    </div>

                    <!-- shadow-4 -->
                    <div class="ds-elevation-item fluent-shadow-4">
                        <span class="ds-elevation-label">shadow-4</span>
                        <span class="ds-elevation-semantic">Medium</span>
                        <span class="ds-elevation-usage">Card default</span>
                    </div>

                    <!-- shadow-8 -->
                    <div class="ds-elevation-item fluent-shadow-8">
                        <span class="ds-elevation-label">shadow-8</span>
                        <span class="ds-elevation-semantic">Large</span>
                        <span class="ds-elevation-usage">Card hover, Dropdown</span>
                    </div>

                    <!-- shadow-16 -->
                    <div class="ds-elevation-item fluent-shadow-16">
                        <span class="ds-elevation-label">shadow-16</span>
                        <span class="ds-elevation-semantic">XLarge</span>
                        <span class="ds-elevation-usage">Modal, Drawer</span>
                    </div>

                    <!-- shadow-28 -->
                    <div class="ds-elevation-item fluent-shadow-28">
                        <span class="ds-elevation-label">shadow-28</span>
                        <span class="ds-elevation-semantic">XXLarge</span>
                        <span class="ds-elevation-usage">Command Bar, FAB</span>
                    </div>

                    <!-- shadow-64 -->
                    <div class="ds-elevation-item fluent-shadow-64">
                        <span class="ds-elevation-label">shadow-64</span>
                        <span class="ds-elevation-semantic">Ambient</span>
                        <span class="ds-elevation-usage">Fullscreen Overlay</span>
                    </div>
                </div>

                <p class="ds-note">ğŸ’¡ Dark theme é™°å½±æ·±åº¦åŠ å€ï¼ˆopacity: 0.24/0.28ï¼‰ï¼Œè‡ªå‹•è·Ÿéš¨ä¸»é¡Œåˆ‡æ›</p>
            </div>

            <!-- Spacing Scale å±•ç¤º -->
            <div class="ds-subsection">
                <h3>Spacing Scale</h3>
                <p class="ds-desc">åŸºæ–¼ 8px åŸºç¤å–®ä½çš„é–“è·ç³»çµ±ï¼Œé©ç”¨æ–¼ padding/margin/gap</p>

                <div class="ds-spacing-grid">
                    <!-- 4px -->
                    <div class="ds-spacing-item">
                        <div class="ds-spacing-bar" style="width: 4px; background: var(--color-primary);"></div>
                        <div class="ds-spacing-info">
                            <span class="ds-spacing-size">4px</span>
                            <span class="ds-spacing-usage">Hairline gapï¼ˆå¾®èª¿ï¼‰</span>
                        </div>
                    </div>

                    <!-- 8px -->
                    <div class="ds-spacing-item">
                        <div class="ds-spacing-bar" style="width: 8px; background: var(--color-primary);"></div>
                        <div class="ds-spacing-info">
                            <span class="ds-spacing-size">8px</span>
                            <span class="ds-spacing-usage">Element paddingï¼ˆæŒ‰éˆ•å…§è·ï¼‰</span>
                        </div>
                    </div>

                    <!-- 12px -->
                    <div class="ds-spacing-item">
                        <div class="ds-spacing-bar" style="width: 12px; background: var(--color-primary);"></div>
                        <div class="ds-spacing-info">
                            <span class="ds-spacing-size">12px</span>
                            <span class="ds-spacing-usage">Small gapï¼ˆè¡¨å–®æ¬„ä½ï¼‰</span>
                        </div>
                    </div>

                    <!-- 16px -->
                    <div class="ds-spacing-item">
                        <div class="ds-spacing-bar" style="width: 16px; background: var(--color-primary);"></div>
                        <div class="ds-spacing-info">
                            <span class="ds-spacing-size">16px</span>
                            <span class="ds-spacing-usage">Standard gapï¼ˆå¡ç‰‡å€å¡Šï¼‰</span>
                        </div>
                    </div>

                    <!-- 24px -->
                    <div class="ds-spacing-item">
                        <div class="ds-spacing-bar" style="width: 24px; background: var(--color-primary);"></div>
                        <div class="ds-spacing-info">
                            <span class="ds-spacing-size">24px</span>
                            <span class="ds-spacing-usage">Section gapï¼ˆç« ç¯€é–“è·ï¼‰</span>
                        </div>
                    </div>

                    <!-- 32px -->
                    <div class="ds-spacing-item">
                        <div class="ds-spacing-bar" style="width: 32px; background: var(--color-primary);"></div>
                        <div class="ds-spacing-info">
                            <span class="ds-spacing-size">32px</span>
                            <span class="ds-spacing-usage">Card paddingï¼ˆå¡ç‰‡å…§è·ï¼‰</span>
                        </div>
                    </div>

                    <!-- 48px -->
                    <div class="ds-spacing-item">
                        <div class="ds-spacing-bar" style="width: 48px; background: var(--color-primary);"></div>
                        <div class="ds-spacing-info">
                            <span class="ds-spacing-size">48px</span>
                            <span class="ds-spacing-usage">Container gapï¼ˆå€å¡Šé–“è·ï¼‰</span>
                        </div>
                    </div>

                    <!-- 64px -->
                    <div class="ds-spacing-item">
                        <div class="ds-spacing-bar" style="width: 64px; background: var(--color-primary);"></div>
                        <div class="ds-spacing-info">
                            <span class="ds-spacing-size">64px</span>
                            <span class="ds-spacing-usage">Page marginï¼ˆé é¢é‚Šè·ï¼‰</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ¯›ç»ç’ƒæ•ˆæœ -->
            <div class="ds-subsection">
                <h3>Acrylic (Blur)</h3>
                <div class="ds-acrylic-demo">
                    <div class="ds-acrylic-bg">
                        <img src="/static/img/demo/sone-103.jpg" alt="èƒŒæ™¯">
                    </div>
                    <div class="ds-acrylic-overlay fluent-acrylic">
                        <span>.fluent-acrylic</span>
                        <code>blur: 30px, saturate: 140%</code>
                    </div>
                </div>
            </div>

            <!-- å‹•ç•«æ™‚é•· -->
            <div class="ds-subsection">
                <h3>Motion Duration</h3>
                <div class="ds-duration-list">
                    <div class="ds-duration-item">
                        <span class="ds-duration-name">ultra-fast</span>
                        <span class="ds-duration-value">50ms</span>
                    </div>
                    <div class="ds-duration-item">
                        <span class="ds-duration-name">faster</span>
                        <span class="ds-duration-value">83ms</span>
                    </div>
                    <div class="ds-duration-item">
                        <span class="ds-duration-name">fast</span>
                        <span class="ds-duration-value">167ms</span>
                    </div>
                    <div class="ds-duration-item">
                        <span class="ds-duration-name">normal</span>
                        <span class="ds-duration-value">250ms</span>
                    </div>
                    <div class="ds-duration-item">
                        <span class="ds-duration-name">slow</span>
                        <span class="ds-duration-value">300ms</span>
                    </div>
                    <div class="ds-duration-item">
                        <span class="ds-duration-name">slower</span>
                        <span class="ds-duration-value">400ms</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- å€å¡Š 3: Buttons (glass æ¨£å¼) -->
        <section id="buttons" class="ds-section glass">
            <h2>Buttons</h2>

            <!-- DaisyUI æŒ‰éˆ• -->
            <div class="ds-subsection">
                <h3>DaisyUI Buttons</h3>
                <div class="ds-button-row">
                    <button class="btn btn-primary">Primary</button>
                    <button class="btn btn-secondary">Secondary</button>
                    <button class="btn btn-accent">Accent</button>
                    <button class="btn btn-ghost">Ghost</button>
                    <button class="btn btn-link">Link</button>
                </div>
                <div class="ds-button-row">
                    <button class="btn btn-outline btn-primary">Outline</button>
                    <button class="btn btn-primary btn-sm">Small</button>
                    <button class="btn btn-primary btn-lg">Large</button>
                    <button class="btn btn-primary" disabled>Disabled</button>
                </div>
            </div>

            <!-- Bootstrap æŒ‰éˆ•ï¼ˆéæ¸¡æœŸä¿ç•™ï¼‰ -->
            <div class="ds-subsection">
                <h3>Bootstrap Buttons (Legacy)</h3>
                <div class="ds-button-row">
                    <button class="btn btn-primary">Primary</button>
                    <button class="btn btn-outline-primary">Outline</button>
                    <button class="btn btn-outline-secondary">Secondary</button>
                    <button class="btn btn-outline-danger">Danger</button>
                    <button class="btn btn-success">Success</button>
                </div>
            </div>

            <!-- è‡ªè¨‚æŒ‰éˆ• -->
            <div class="ds-subsection">
                <h3>Custom Buttons</h3>
                <div class="ds-button-row ds-button-row-dark">
                    <button class="btn-icon"><i class="bi bi-search"></i></button>
                    <button class="btn-icon active"><i class="bi bi-arrow-right"></i></button>
                    <button class="btn-glass">Glass Button</button>
                </div>
                <div class="ds-button-row">
                    <button class="btn-hero btn-hero-primary">
                        <i class="bi bi-play-fill"></i> Hero Primary
                    </button>
                    <button class="btn-hero btn-hero-secondary">
                        <i class="bi bi-clipboard"></i> Hero Secondary
                    </button>
                </div>
            </div>
        </section>

        <!-- å€å¡Š 4: Form Controls (accent-bar æ¨£å¼) -->
        <section id="forms" class="ds-section accent-bar">
            <h2>Form Controls</h2>

            <div class="ds-subsection">
                <h3>Input Fields</h3>
                <div class="ds-form-grid">
                    <div class="ds-form-item">
                        <label class="form-label">Text Input</label>
                        <input type="text" class="form-control" placeholder="è¼¸å…¥æ–‡å­—...">
                    </div>
                    <div class="ds-form-item">
                        <label class="form-label">Small Input</label>
                        <input type="text" class="form-control form-control-sm" placeholder="å°å‹è¼¸å…¥æ¡†">
                    </div>
                    <div class="ds-form-item">
                        <label class="form-label">Select</label>
                        <select class="form-select">
                            <option>é¸é … 1</option>
                            <option>é¸é … 2</option>
                            <option>é¸é … 3</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="ds-subsection">
                <h3>Spotlight Search (C.6 Acrylic)</h3>
                <p class="ds-desc" style="margin-bottom: 1rem; color: var(--text-secondary); font-size: 0.9rem;">
                    è† å›Šå½¢æœå°‹æ¡† + Acrylic æ¯›ç»ç’ƒæ•ˆæœ + å…§å±¤é«˜å…‰ç·šã€‚<br>
                    <strong>Focus ç‹€æ…‹</strong>ï¼šscale(1.02) + ä¸»é¡Œè‰²ç™¼å…‰
                </p>

                <!-- å±•ç¤ºèƒŒæ™¯åœ–ç‰‡ï¼ˆç‚ºäº†é¡¯ç¤º backdrop-filter æ•ˆæœï¼‰-->
                <div style="position: relative; padding: 2rem; border-radius: var(--radius-md); overflow: hidden; background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);">
                    <div class="spotlight-search" style="max-width: 500px; position: relative; z-index: 2;">
                        <i class="bi bi-search search-icon-left"></i>
                        <input type="text" placeholder="æœå°‹ç•ªè™Ÿã€å¥³å„ªæˆ–æ‹–å…¥æª”æ¡ˆ...">
                        <div class="search-actions-right">
                            <button class="btn-icon"><i class="bi bi-x-lg"></i></button>
                            <button class="btn-icon active"><i class="bi bi-arrow-right"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ds-subsection">
                <h3>Checkbox & Toggle</h3>
                <div class="ds-form-row">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="check1" checked>
                        <label class="form-check-label" for="check1">Checkbox</label>
                    </div>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="switch1" checked>
                        <label class="form-check-label" for="switch1">Toggle Switch</label>
                    </div>
                </div>
            </div>
        </section>

        <!-- å€å¡Š 4.5: State Matrix (glass æ¨£å¼) -->
        <section id="state-matrix" class="ds-section glass">
            <h2>State Matrix</h2>
            <p class="ds-note">æ ¸å¿ƒå…ƒä»¶çš„è¦–è¦ºç‹€æ…‹å±•ç¤ºï¼ˆéäº’å‹•ï¼Œç´” CSS å¼·åˆ¶é¡¯ç¤ºï¼‰</p>

            <!-- Button States -->
            <div class="ds-subsection">
                <h3>Button States</h3>
                <div class="ds-state-matrix">
                    <div class="ds-state-item">
                        <span class="ds-state-label">Default</span>
                        <button class="btn btn-primary">Primary</button>
                    </div>
                    <div class="ds-state-item">
                        <span class="ds-state-label">Hover</span>
                        <button class="btn btn-primary state-hover">Primary</button>
                    </div>
                    <div class="ds-state-item">
                        <span class="ds-state-label">Active</span>
                        <button class="btn btn-primary state-active">Primary</button>
                    </div>
                    <div class="ds-state-item">
                        <span class="ds-state-label">Disabled</span>
                        <button class="btn btn-primary" disabled>Primary</button>
                    </div>
                </div>
            </div>

            <!-- Input States -->
            <div class="ds-subsection">
                <h3>Input States</h3>
                <div class="ds-state-matrix">
                    <div class="ds-state-item">
                        <span class="ds-state-label">Default</span>
                        <input type="text" class="form-control" placeholder="è¼¸å…¥æ–‡å­—..." style="width: 160px;">
                    </div>
                    <div class="ds-state-item">
                        <span class="ds-state-label">Focus</span>
                        <input type="text" class="form-control state-focus" value="èšç„¦ç‹€æ…‹" style="width: 160px;">
                    </div>
                    <div class="ds-state-item">
                        <span class="ds-state-label">Error</span>
                        <input type="text" class="form-control state-error" value="éŒ¯èª¤ç‹€æ…‹" style="width: 160px;">
                    </div>
                    <div class="ds-state-item">
                        <span class="ds-state-label">Disabled</span>
                        <input type="text" class="form-control" value="ç¦ç”¨ç‹€æ…‹" disabled style="width: 160px;">
                    </div>
                </div>
            </div>

            <!-- Card States -->
            <div class="ds-subsection">
                <h3>Card States</h3>
                <div class="ds-state-matrix" style="grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));">
                    <!-- Default -->
                    <div class="ds-state-item">
                        <span class="ds-state-label">Default</span>
                        <div class="gallery-card" style="width: 100%; max-width: 220px;">
                            <div class="gallery-card-img">
                                <div style="width: 100%; aspect-ratio: 3/2; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: var(--radius-sm);"></div>
                            </div>
                            <div class="gallery-card-footer">
                                <div class="gallery-card-title">é è¨­ç‹€æ…‹</div>
                                <div class="gallery-card-meta">
                                    <span class="gallery-card-num">DEFAULT</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Hover -->
                    <div class="ds-state-item">
                        <span class="ds-state-label">Hover</span>
                        <div class="gallery-card state-hover" style="width: 100%; max-width: 220px;">
                            <div class="gallery-card-img">
                                <div style="width: 100%; aspect-ratio: 3/2; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border-radius: var(--radius-sm); position: relative;">
                                    <div class="gallery-card-actions">
                                        <button class="btn-glass">æŸ¥çœ‹</button>
                                    </div>
                                </div>
                            </div>
                            <div class="gallery-card-footer">
                                <div class="gallery-card-title">æ‡¸åœç‹€æ…‹</div>
                                <div class="gallery-card-meta">
                                    <span class="gallery-card-num">HOVER</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Selected -->
                    <div class="ds-state-item">
                        <span class="ds-state-label">Selected</span>
                        <div class="gallery-card state-selected" style="width: 100%; max-width: 220px;">
                            <div class="gallery-card-img">
                                <div style="width: 100%; aspect-ratio: 3/2; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); border-radius: var(--radius-sm);"></div>
                            </div>
                            <div class="gallery-card-footer">
                                <div class="gallery-card-title">é¸ä¸­ç‹€æ…‹</div>
                                <div class="gallery-card-meta">
                                    <span class="gallery-card-num">SELECTED</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- å€å¡Š 5: Cards (glass æ¨£å¼) -->
        <section id="cards" class="ds-section glass">
            <h2>Cards</h2>

            <div class="ds-subsection">
                <h3>Bootstrap Card (Legacy)</h3>
                <div class="card" style="max-width: 300px;">
                    <div class="card-header">Card Header</div>
                    <div class="card-body">
                        <h5 class="card-title">Card Title</h5>
                        <p class="card-text">Card content goes here.</p>
                    </div>
                </div>
            </div>

            <div class="ds-subsection">
                <h3>Fluent Card (C.5 Enhanced)</h3>
                <div class="fluent-card" style="max-width: 300px; padding: 1rem; background: var(--bg-card);">
                    <h5>Fluent Card</h5>
                    <p style="color: var(--text-secondary); margin-bottom: 0.5rem;">12px åœ“è§’ + é ‚éƒ¨é«˜å…‰ç·š + shadow-4</p>
                    <p style="color: var(--text-muted); font-size: 0.85rem; margin: 0;">
                        <strong>Hover:</strong> é«˜å…‰ç·šåŠ å¼· + shadow-8 + ä¸»é¡Œè‰²ç™¼å…‰
                    </p>
                </div>
            </div>

            <div class="ds-subsection">
                <h3>Gallery Card</h3>
                <div class="gallery-card ds-gallery-card" style="max-width: 280px;">
                    <div class="gallery-card-img">
                        <img src="/static/img/demo/mide-974.jpg" alt="å°é¢">
                        <div class="gallery-card-actions">
                            <button class="btn-glass">æŸ¥çœ‹</button>
                            <button class="btn-glass">ç·¨è¼¯</button>
                        </div>
                    </div>
                    <div class="gallery-card-footer">
                        <div class="gallery-card-title">ä½œå“æ¨™é¡Œç¯„ä¾‹</div>
                        <div class="gallery-card-meta">
                            <span class="gallery-card-num">MIDE-974</span>
                            <span>2024-01-01</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- å€å¡Š 6: AV Card Variantsï¼ˆé‡é»ï¼Œaccent-bar æ¨£å¼ï¼‰-->
        <section id="av-cards" class="ds-section accent-bar">
            <h2>AV Card Variants</h2>
            <p class="ds-note">3 ç¨®æ ¸å¿ƒå¡ç‰‡è®Šé«”ç”¨æ–¼ä¸åŒå ´æ™¯ï¼Œçµ±ä¸€ä½¿ç”¨ Fluent Design tokens</p>

            <!-- Preview è®Šé«”ï¼ˆç¶²æ ¼å¡ç‰‡ï¼‰ -->
            <div class="ds-subsection">
                <h3>1. Previewï¼ˆç¶²æ ¼å°é¢ï¼‰</h3>
                <p class="ds-desc">ç”¨æ–¼ Gallery ç¶²æ ¼å±•ç¤ºï¼Œå¼·èª¿å°é¢è¦–è¦ºã€‚çµ±ä¸€å°ºå¯¸ç¶²æ ¼ä½ˆå±€</p>
                <div class="ds-card-demo ds-card-mosaic">
                    <!-- å¤§å¡ (featured) -->
                    <div class="av-card-preview featured">
                        <div class="av-card-preview-img">
                            <img src="/static/img/demo/sone-103.jpg" alt="cover">
                            <div class="av-card-preview-overlay">
                                <button class="btn-glass"><i class="bi bi-eye"></i></button>
                                <button class="btn-glass"><i class="bi bi-folder-plus"></i></button>
                            </div>
                            <span class="av-card-preview-badge">HD</span>
                        </div>
                        <div class="av-card-preview-footer">
                            <span class="av-num">SONE-103</span>
                            <span class="av-actress">å¥³å„ªå</span>
                        </div>
                    </div>
                    <!-- å°å¡ 1 -->
                    <div class="av-card-preview">
                        <div class="av-card-preview-img">
                            <img src="/static/img/demo/mide-974.jpg" alt="cover">
                            <span class="av-card-preview-badge local">æœ¬åœ°</span>
                        </div>
                        <div class="av-card-preview-footer">
                            <span class="av-num">MIDE-974</span>
                            <span class="av-actress">å¥³å„ªå</span>
                        </div>
                    </div>
                    <!-- å°å¡ 2 -->
                    <div class="av-card-preview">
                        <div class="av-card-preview-img">
                            <img src="/static/img/demo/fc2-1723984.jpg" alt="cover">
                            <span class="av-card-preview-badge">FC2</span>
                        </div>
                        <div class="av-card-preview-footer">
                            <span class="av-num">FC2-PPV-1723984</span>
                            <span class="av-actress">ç´ äºº</span>
                        </div>
                    </div>
                </div>
                <pre class="ds-code"><code>.av-card-preview {
  border-radius: var(--fluent-radius-xl);
  box-shadow: var(--fluent-shadow-4);
  overflow: hidden;
}
.av-card-preview:hover {
  box-shadow: 0 0 0 2px var(--accent), 0 0 20px rgba(90, 200, 250, 0.2);
  transform: translateY(-6px);
}</code></pre>
            </div>

            <!-- Full è®Šé«” -->
            <div class="ds-subsection">
                <h3>2. Fullï¼ˆè©³ç´°é é¢ï¼‰</h3>
                <p class="ds-desc">ç”¨æ–¼æœå°‹çµæœè©³æƒ…ï¼Œå·¦å³åˆ†å€ä½ˆå±€</p>
                <div class="ds-card-demo">
                    <div class="av-card-full">
                        <div class="av-card-full-cover">
                            <img src="/static/img/demo/cawd-441.jpg" alt="full cover">
                        </div>
                        <div class="av-card-full-info">
                            <div class="av-card-full-header">
                                <h4 class="av-num">CAWD-441</h4>
                                <span class="local-badge">æœ¬åœ°</span>
                            </div>
                            <div class="av-card-full-body">
                                <div class="info-row">
                                    <span class="info-label">æ¼”å“¡</span>
                                    <span class="info-value">å¥³å„ªåç¨±</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">ç™¼è¡Œæ—¥æœŸ</span>
                                    <span class="info-value">2024-01-15</span>
                                </div>
                                <div class="info-row">
                                    <span class="info-label">ç‰‡å•†</span>
                                    <span class="info-value">Kawaii</span>
                                </div>
                            </div>
                            <div class="av-card-full-footer">
                                <span class="info-label">æ¨™é¡Œ</span>
                                <p class="info-value">ä½œå“æ¨™é¡Œç¯„ä¾‹ï¼Œå¯èƒ½å¾ˆé•·éœ€è¦æ›è¡Œé¡¯ç¤º</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Compact è®Šé«” -->
            <div class="ds-subsection">
                <h3>3. Compactï¼ˆæª”æ¡ˆåˆ—è¡¨è¡Œï¼‰</h3>
                <p class="ds-desc">ç”¨æ–¼æ‰¹æ¬¡è™•ç†çš„æª”æ¡ˆåˆ—è¡¨ï¼Œå–®è¡Œç·Šæ¹Š</p>
                <div class="ds-card-demo">
                    <div class="av-card-compact">
                        <i class="bi bi-file-earmark-play"></i>
                        <span class="av-filename">SONE-103.mp4</span>
                        <span class="av-num">SONE-103</span>
                        <span class="av-status searched"><i class="bi bi-check"></i> å·²æœå°‹</span>
                        <button class="btn btn-sm btn-outline-primary">ç”¢ç”Ÿ</button>
                    </div>
                    <div class="av-card-compact">
                        <i class="bi bi-file-earmark-play"></i>
                        <span class="av-filename">IPZZ-001_uncensored.mp4</span>
                        <span class="av-num">IPZZ-001</span>
                        <span class="av-status pending">å¾…æœå°‹</span>
                        <button class="btn btn-sm btn-outline-secondary">æœå°‹</button>
                    </div>
                    <div class="av-card-compact active">
                        <i class="bi bi-file-earmark-play"></i>
                        <span class="av-filename">FC2-PPV-1723984.mp4</span>
                        <span class="av-num">FC2-PPV-1723984</span>
                        <span class="av-status local"><i class="bi bi-folder-check"></i> æœ¬åœ°</span>
                        <button class="btn btn-sm btn-success">å®Œæˆ</button>
                    </div>
                </div>
                <pre class="ds-code"><code>.av-card-compact {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem;
  border-radius: var(--fluent-radius-md);
}
.av-card-compact.active {
  background: var(--border-light);
}</code></pre>
            </div>
        </section>

        <!-- å€å¡Š 7: File Components (glass æ¨£å¼) -->
        <section id="file-components" class="ds-section glass">
            <h2>File Components</h2>
            <p class="ds-note">æª”æ¡ˆæ“ä½œç›¸é—œå…ƒä»¶ï¼Œç”¨æ–¼ Search å’Œ Gallery é é¢</p>

            <!-- File List Section -->
            <div class="ds-subsection">
                <h3>File List Section</h3>
                <p class="ds-desc">æª”æ¡ˆåˆ—è¡¨é …ç›®ï¼Œé¡¯ç¤ºæª”æ¡ˆè³‡è¨Šå’Œæ“ä½œæŒ‰éˆ•ï¼Œæ”¯æ´ hover å’Œ active ç‹€æ…‹</p>
                <div class="ds-card-demo">
                    <div class="file-list-section" style="max-width: 600px;">
                        <div class="file-list-header">
                            <span style="font-size: 0.9rem; font-weight: 600; color: var(--text-primary);">æª”æ¡ˆåˆ—è¡¨</span>
                            <span style="font-size: 0.8rem; color: var(--text-secondary);">3 å€‹æª”æ¡ˆ</span>
                        </div>
                        <div class="file-item">
                            <i class="bi bi-file-earmark-play file-icon"></i>
                            <span class="file-name">SONE-103.mp4</span>
                            <span class="file-status">å·²æœå°‹</span>
                            <button class="btn btn-sm btn-outline-primary btn-scrape-single">æŸ¥çœ‹</button>
                        </div>
                        <div class="file-item active">
                            <i class="bi bi-file-earmark-play file-icon"></i>
                            <span class="file-name">MIDE-974_HD.mp4</span>
                            <span class="file-status">å·²æœå°‹</span>
                            <button class="btn btn-sm btn-outline-primary btn-scrape-single">æŸ¥çœ‹</button>
                        </div>
                        <div class="file-item">
                            <i class="bi bi-file-earmark-play file-icon"></i>
                            <span class="file-name">FC2-PPV-1723984.mp4</span>
                            <span class="file-status" style="color: var(--text-muted);">å¾…æœå°‹</span>
                            <button class="btn btn-sm btn-outline-secondary btn-scrape-single">æœå°‹</button>
                        </div>
                    </div>
                </div>
                <pre class="ds-code"><code>.file-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  border-radius: 4px;
  cursor: pointer;
}
.file-item.active {
  background: var(--border-light);
  color: var(--accent);
  font-weight: 600;
}</code></pre>
            </div>

            <!-- Drag Overlay -->
            <div class="ds-subsection" id="drag-overlay">
                <h3>Drag Overlay (Search å½ˆçª—)</h3>
                <p class="ds-desc">æ‹–æ›³æª”æ¡ˆæ™‚çš„å…¨è¢å¹•è¦†è“‹å±¤ï¼Œæ¯›ç»ç’ƒæ•ˆæœ + å¤§åœ–ç¤ºæç¤ºï¼Œæ”¯æ´ä¸»é¡Œè·Ÿéš¨</p>

                <!-- ç¤ºç¯„å®¹å™¨ï¼šæ¨¡æ“¬å¯¦éš›æ•ˆæœ -->
                <div class="ds-card-demo" style="position: relative; height: 300px; overflow: hidden; border-radius: var(--fluent-radius-xl);">
                    <!-- èƒŒæ™¯åœ–ç‰‡ -->
                    <img src="/static/img/demo/sone-103.jpg" alt="background"
                         style="position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover;">

                    <!-- Drag Overlayï¼ˆä½¿ç”¨ .active classï¼‰ -->
                    <div class="drag-overlay active" style="position: absolute; inset: 0; border-radius: var(--fluent-radius-xl);">
                        <div class="drag-overlay-content">
                            <i class="bi bi-file-earmark-arrow-up"></i>
                            <p>æ‹–å…¥æª”æ¡ˆæˆ–è³‡æ–™å¤¾</p>
                        </div>
                    </div>
                </div>

                <!-- æŠ€è¡“èªªæ˜ -->
                <div style="margin-top: 1rem; padding: 1rem; background: var(--bg-body); border-radius: var(--fluent-radius-lg); border: 1px solid var(--border-light);">
                    <p style="margin: 0; color: var(--text-secondary); font-size: 0.9rem;">
                        <strong style="color: var(--text-primary);">ä¸»é¡Œé©é…ï¼š</strong>
                        èƒŒæ™¯è‰² <code>oklch(var(--b1) / 0.6)</code>ã€æ–‡å­—è‰² <code>oklch(var(--bc))</code> è‡ªå‹•è·Ÿéš¨ DaisyUI ä¸»é¡Œ
                    </p>
                </div>

                <pre class="ds-code"><code>&lt;div class="drag-overlay active"&gt;
  &lt;div class="drag-overlay-content"&gt;
    &lt;i class="bi bi-file-earmark-arrow-up"&gt;&lt;/i&gt;
    &lt;p&gt;æ‹–å…¥æª”æ¡ˆæˆ–è³‡æ–™å¤¾&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
            </div>

            <!-- Folder Item -->
            <div class="ds-subsection">
                <h3>Folder Item</h3>
                <p class="ds-desc">Gallery é çš„è³‡æ–™å¤¾åˆ—è¡¨é …ç›®ï¼Œé¡¯ç¤ºè·¯å¾‘å’Œç§»é™¤æŒ‰éˆ•</p>
                <div class="ds-card-demo">
                    <div style="max-width: 600px; background: var(--bg-card); border-radius: 12px; overflow: hidden;">
                        <div class="folder-item">
                            <i class="bi bi-folder folder-icon"></i>
                            <span class="folder-path">/Users/username/Videos/AV</span>
                            <button class="btn btn-sm btn-outline-danger btn-remove">ç§»é™¤</button>
                        </div>
                        <div class="folder-item">
                            <i class="bi bi-folder folder-icon"></i>
                            <span class="folder-path">D:\Downloads\JAV\Uncensored</span>
                            <button class="btn btn-sm btn-outline-danger btn-remove">ç§»é™¤</button>
                        </div>
                    </div>
                </div>
                <pre class="ds-code"><code>.folder-item {
  display: flex;
  align-items: center;
  padding: 0.875rem 1.25rem;
  gap: 0.75rem;
  border-bottom: 1px solid var(--border-light);
}
.folder-item:hover {
  background: var(--bg-body);
}
.folder-item:hover .btn-remove {
  opacity: 1;
}</code></pre>
            </div>
        </section>

        <!-- å€å¡Š 8: Progress & Feedback (accent-bar æ¨£å¼) -->
        <section id="progress" class="ds-section accent-bar">
            <h2>Progress & Feedback</h2>
            <p class="ds-note">é€²åº¦é¡¯ç¤ºå’Œå³æ™‚å›é¥‹å…ƒä»¶</p>

            <!-- Progress Indicator -->
            <div class="ds-subsection">
                <h3>Progress Indicator</h3>
                <p class="ds-desc">Search é çš„æœå°‹é€²åº¦é¡¯ç¤ºï¼Œè·Ÿéš¨ä¸»é¡Œé¡¯ç¤ºï¼ˆwireframe: æ·ºåº•æ·±å­— / dim: æ·±åº•æ·ºå­—ï¼‰</p>
                <div class="ds-card-demo" style="background: var(--bg-body); padding: 2rem; border-radius: var(--radius-md);">
                    <div class="search-progress" style="max-width: 500px; margin: 0 auto;">
                        <div class="progress-container">
                            <div class="progress-header">
                                <span class="progress-status">æœå°‹ä¸­</span>
                            </div>
                            <div class="progress-log">
                                æ­£åœ¨æœå°‹ SONE-103...
                            </div>
                            <div class="detail-progress show">
                                <div class="detail-bar" style="width: 65%;"></div>
                                <span class="detail-text">65 / 100</span>
                            </div>
                        </div>
                    </div>
                </div>
                <pre class="ds-code"><code>.search-progress {
  display: flex;
  align-items: center;
  justify-content: center;
}
.progress-log::before {
  content: '';
  width: 8px;
  height: 8px;
  border: 2px solid rgba(96, 165, 250, 0.3);
  border-top-color: #60a5fa;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}</code></pre>
            </div>

            <!-- Mini Terminal -->
            <div class="ds-subsection">
                <h3>Mini Terminal</h3>
                <p class="ds-desc">Gallery é çš„ç”¢ç”Ÿé€²åº¦æ—¥èªŒè¦–çª—ï¼ŒTerminal é¢¨æ ¼è¼¸å‡º</p>
                <div class="ds-card-demo">
                    <div class="mini-terminal" style="max-width: 500px;">
                        <div class="mini-terminal-header">
                            <span class="title">ç”¢ç”Ÿé€²åº¦</span>
                        </div>
                        <div class="mini-terminal-body">
                            <div class="log-info">[INFO] æ­£åœ¨ç”¢ç”Ÿç¶²é åˆ—è¡¨...</div>
                            <div class="log-info">[INFO] å·²è™•ç† 50 å€‹å½±ç‰‡</div>
                            <div class="log-warn">[WARN] éƒ¨åˆ†æª”æ¡ˆç¼ºå°‘å°é¢</div>
                            <div class="log-info">[INFO] ç”¢ç”Ÿå®Œæˆ</div>
                        </div>
                        <div class="progress-mini">
                            <div style="width: 80%; height: 100%; background: linear-gradient(90deg, #3b82f6, #60a5fa); border-radius: 2px;"></div>
                        </div>
                    </div>
                </div>
                <pre class="ds-code"><code>.mini-terminal {
  background: #1a1a2e;
  border-radius: 12px;
  overflow: hidden;
}
.mini-terminal-body {
  font-family: 'SF Mono', 'Fira Code', monospace;
  font-size: 0.75rem;
  color: #d4d4d4;
}</code></pre>
            </div>

            <!-- Batch Progress Bar -->
            <div class="ds-subsection">
                <h3>Batch Progress Bar</h3>
                <p class="ds-desc">æ‰¹æ¬¡è™•ç†é€²åº¦æ¢ï¼Œèˆ‡ detail-progress é¢¨æ ¼çµ±ä¸€ï¼ˆè—è‰²æ¼¸å±¤ï¼‰</p>
                <div class="ds-card-demo">
                    <div class="batch-progress" style="max-width: 400px;">
                        <div class="batch-progress-bar">
                            <div class="batch-progress-fill" style="width: 40%;"></div>
                        </div>
                        <small class="batch-progress-text">è™•ç†ä¸­ 4/10</small>
                    </div>
                    <div class="batch-progress" style="max-width: 400px;">
                        <div class="batch-progress-bar">
                            <div class="batch-progress-fill" style="width: 75%;"></div>
                        </div>
                        <small class="batch-progress-text">è™•ç†ä¸­ 15/20</small>
                    </div>
                </div>
                <pre class="ds-code"><code>.batch-progress-fill {
  height: 100%;
  background: linear-gradient(90deg,
    var(--progress-gradient-start),
    var(--progress-gradient-end));
  transition: var(--progress-transition);
}</code></pre>
            </div>

            <!-- Collapse Toggle -->
            <div class="ds-subsection">
                <h3>Collapse Toggle</h3>
                <p class="ds-desc">å±•é–‹/æ”¶èµ·é€£çµï¼Œä½¿ç”¨ Alpine.jsï¼ŒChevron icon æ—‹è½‰å‹•ç•«</p>
                <div class="ds-card-demo">
                    <div style="max-width: 400px; padding: 1rem; background: var(--bg-card); border-radius: 12px;">
                        <div x-data="{ expanded: false }">
                            <a class="collapse-toggle text-decoration-none"
                               @click="expanded = !expanded"
                               :aria-expanded="expanded"
                               role="button"
                               style="display: inline-flex; align-items: center; gap: 0.5rem; color: var(--text-secondary); font-size: 0.875rem; cursor: pointer;">
                                <i class="bi bi-chevron-down" :class="{ 'rotate-180': expanded }"></i> é€²éšé¸é …
                            </a>
                            <div x-show="expanded" x-collapse style="margin-top: 1rem; padding: 1rem; background: var(--bg-body); border-radius: 8px;">
                                <p style="margin: 0; color: var(--text-secondary);">é€™è£¡æ˜¯å±•é–‹å¾Œçš„å…§å®¹å€åŸŸ</p>
                            </div>
                        </div>
                    </div>
                </div>
                <pre class="ds-code"><code>&lt;div x-data="{ expanded: false }"&gt;
  &lt;a class="collapse-toggle"
     @click="expanded = !expanded"&gt;
    &lt;i class="bi bi-chevron-down"
       :class="{ 'rotate-180': expanded }"&gt;&lt;/i&gt;
    é€²éšé¸é …
  &lt;/a&gt;
  &lt;div x-show="expanded" x-collapse&gt;
    å…§å®¹...
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
            </div>
        </section>

        <!-- å€å¡Š 9: Navigation (glass æ¨£å¼) -->
        <section id="navigation" class="ds-section glass">
            <h2>Navigation</h2>

            <div class="ds-subsection">
                <h3>Sidebar (Mini Demo)</h3>
                <div class="ds-sidebar-demo">
                    <nav class="ds-sidebar-mini">
                        <a class="nav-link active"><i class="bi bi-search"></i> æœå°‹</a>
                        <a class="nav-link"><i class="bi bi-list-ul"></i> åˆ—è¡¨ç”Ÿæˆ</a>
                        <a class="nav-link"><i class="bi bi-collection-play"></i> ç€è¦½</a>
                        <a class="nav-link"><i class="bi bi-gear"></i> è¨­å®š</a>
                    </nav>
                </div>
            </div>

            <div class="ds-subsection">
                <h3>Tabs (DaisyUI)</h3>
                <div class="alert alert-warning" role="alert" style="margin-bottom: 1rem; padding: 0.5rem 0.75rem;">
                    <i class="bi bi-exclamation-triangle"></i> <strong>æœªå¯¦éš›ä½¿ç”¨</strong> - æ­¤å…ƒä»¶ç›®å‰æœªåœ¨å°ˆæ¡ˆä¸­ä½¿ç”¨
                </div>
                <div class="tabs tabs-bordered">
                    <a class="tab tab-active">Tab 1</a>
                    <a class="tab">Tab 2</a>
                    <a class="tab">Tab 3</a>
                </div>
            </div>

            <div class="ds-subsection">
                <h3>Navigation Rail (Collapsed State)</h3>
                <p class="ds-desc">Icon-only å°èˆªæ¢ï¼Œç”¨æ–¼æ”¶åˆå´é‚Šæ¬„æ™‚çš„ç²¾ç°¡æ¨¡å¼ã€‚å±•ç¤º Fluent Design 2 è¦ç¯„çš„ 48x48px æ­£æ–¹å½¢é …ç›® + pill å½¢ active ç‹€æ…‹</p>

                <!-- å±•é–‹ vs æ”¶åˆå°æ¯” -->
                <h4 style="font-size: 0.75rem; font-weight: 500; color: var(--text-muted); margin: 1.5rem 0 0.75rem 0; letter-spacing: 0.05em;">EXPANDED VS COLLAPSED</h4>
                <div style="display: flex; gap: 2rem; flex-wrap: wrap; align-items: flex-start; margin-bottom: 2rem;">
                    <!-- å±•é–‹ç‹€æ…‹ (Traditional Sidebar) -->
                    <div>
                        <span style="display: block; font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.5rem;">Expanded (200px)</span>
                        <div class="ds-sidebar-demo">
                            <nav class="ds-sidebar-mini">
                                <a class="nav-link active"><i class="bi bi-search"></i> æœå°‹</a>
                                <a class="nav-link"><i class="bi bi-list-ul"></i> åˆ—è¡¨ç”Ÿæˆ</a>
                                <a class="nav-link"><i class="bi bi-collection-play"></i> ç€è¦½</a>
                                <a class="nav-link"><i class="bi bi-gear"></i> è¨­å®š</a>
                            </nav>
                        </div>
                    </div>

                    <!-- æ”¶åˆç‹€æ…‹ (Navigation Rail) -->
                    <div>
                        <span style="display: block; font-size: 0.75rem; color: var(--text-muted); margin-bottom: 0.5rem;">Collapsed (60px)</span>
                        <div class="ds-nav-rail">
                            <a class="ds-nav-rail-link active" title="æœå°‹"><i class="bi bi-search"></i></a>
                            <a class="ds-nav-rail-link" title="åˆ—è¡¨ç”Ÿæˆ"><i class="bi bi-list-ul"></i></a>
                            <a class="ds-nav-rail-link" title="ç€è¦½"><i class="bi bi-collection-play"></i></a>
                            <a class="ds-nav-rail-link" title="è¨­å®š"><i class="bi bi-gear"></i></a>
                        </div>
                    </div>
                </div>

                <!-- ç‹€æ…‹å±•ç¤º -->
                <h4 style="font-size: 0.75rem; font-weight: 500; color: var(--text-muted); margin: 1.5rem 0 0.75rem 0; letter-spacing: 0.05em;">STATE MATRIX</h4>
                <div style="display: flex; gap: 2rem; flex-wrap: wrap; align-items: flex-start; margin-bottom: 2rem;">
                    <!-- Default -->
                    <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">Default</span>
                        <div style="background: var(--bg-card); border-radius: var(--fluent-radius-lg); padding: 0.5rem; border: 1px solid var(--border-light);">
                            <a class="ds-nav-rail-link" title="é è¨­"><i class="bi bi-star"></i></a>
                        </div>
                    </div>

                    <!-- Hover -->
                    <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">Hover</span>
                        <div style="background: var(--bg-card); border-radius: var(--fluent-radius-lg); padding: 0.5rem; border: 1px solid var(--border-light);">
                            <a class="ds-nav-rail-link" title="æ‡¸åœ" style="background: color-mix(in oklch, var(--color-base-content) 8%, transparent); color: var(--color-base-content);"><i class="bi bi-star"></i></a>
                        </div>
                    </div>

                    <!-- Active -->
                    <div style="display: flex; flex-direction: column; align-items: center; gap: 0.5rem;">
                        <span style="font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">Active</span>
                        <div style="background: var(--bg-card); border-radius: var(--fluent-radius-lg); padding: 0.5rem; border: 1px solid var(--border-light);">
                            <a class="ds-nav-rail-link active" title="å•Ÿç”¨"><i class="bi bi-star-fill"></i></a>
                        </div>
                    </div>
                </div>

                <!-- æŠ€è¡“è¦æ ¼ -->
                <h4 style="font-size: 0.75rem; font-weight: 500; color: var(--text-muted); margin: 1.5rem 0 0.75rem 0; letter-spacing: 0.05em;">TECHNICAL SPECS</h4>
                <div style="padding: 1rem; background: var(--bg-body); border-radius: var(--fluent-radius-lg); border: 1px solid var(--border-light);">
                    <table style="width: 100%; font-size: 0.85rem;">
                        <tbody>
                            <tr>
                                <td style="padding: 0.5rem 0; color: var(--text-primary); font-weight: 600; width: 40%;">å®¹å™¨å¯¬åº¦</td>
                                <td style="padding: 0.5rem 0; color: var(--text-secondary);"><code>60px</code></td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem 0; color: var(--text-primary); font-weight: 600;">é …ç›®å°ºå¯¸</td>
                                <td style="padding: 0.5rem 0; color: var(--text-secondary);"><code>48px Ã— 48px</code> æ­£æ–¹å½¢</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem 0; color: var(--text-primary); font-weight: 600;">Icon å°ºå¯¸</td>
                                <td style="padding: 0.5rem 0; color: var(--text-secondary);"><code>24px</code></td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem 0; color: var(--text-primary); font-weight: 600;">é–“è·</td>
                                <td style="padding: 0.5rem 0; color: var(--text-secondary);"><code>0.5rem (8px)</code> å‚ç›´é–“è·</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem 0; color: var(--text-primary); font-weight: 600;">Default åœ“è§’</td>
                                <td style="padding: 0.5rem 0; color: var(--text-secondary);"><code>var(--fluent-radius-md)</code> (4px)</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem 0; color: var(--text-primary); font-weight: 600;">Active åœ“è§’</td>
                                <td style="padding: 0.5rem 0; color: var(--text-secondary);"><code>var(--radius-pill)</code> (è† å›Šå½¢)</td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem 0; color: var(--text-primary); font-weight: 600;">Active èƒŒæ™¯</td>
                                <td style="padding: 0.5rem 0; color: var(--text-secondary);"><code>oklch(var(--p) / 0.15)</code></td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem 0; color: var(--text-primary); font-weight: 600;">Active é‚Šæ¡†</td>
                                <td style="padding: 0.5rem 0; color: var(--text-secondary);"><code>2px solid oklch(var(--p))</code></td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem 0; color: var(--text-primary); font-weight: 600;">Active ç™¼å…‰</td>
                                <td style="padding: 0.5rem 0; color: var(--text-secondary);"><code>0 0 16px var(--glow-primary)</code></td>
                            </tr>
                            <tr>
                                <td style="padding: 0.5rem 0; color: var(--text-primary); font-weight: 600;">Hover èƒŒæ™¯</td>
                                <td style="padding: 0.5rem 0; color: var(--text-secondary);"><code>color-mix(in oklch, var(--color-base-content) 8%, transparent)</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <pre class="ds-code"><code>.ds-nav-rail {
  width: 60px;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  padding: 1rem 6px;
}

.ds-nav-rail-link {
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--fluent-radius-md);
}

.ds-nav-rail-link.active {
  background: oklch(var(--p) / 0.15);
  color: oklch(var(--pc));
  border: 2px solid oklch(var(--p));
  border-radius: var(--radius-pill);
  box-shadow: 0 0 16px var(--glow-primary);
}</code></pre>
            </div>
        </section>

        <!-- å€å¡Š 10: Rotating Border Effect (accent-bar æ¨£å¼) -->
        <section id="rotating-border" class="ds-section accent-bar">
            <h2>Rotating Border Effect</h2>
            <p class="ds-note">å–®å…‰é»æ—‹è½‰å¤–æ¡†ç‰¹æ•ˆï¼Œç”¨æ–¼æŒ‡ç¤ºã€Œæœ‰æœ¬åœ°åŒ¹é…ã€æˆ–ã€Œæœ‰å…§å®¹ã€ç‹€æ…‹</p>

            <!-- åŸºç¤å±•ç¤º -->
            <div class="ds-subsection">
                <h3>Basic Usage</h3>
                <p class="ds-desc">ç‚ºå…ƒç´ æ·»åŠ  <code>.rotating-border-spotlight</code> classï¼Œä¸¦ç”¨ <code>.active</code> å•Ÿç”¨æ—‹è½‰</p>
                <div class="ds-card-demo">
                    <div class="d-flex gap-3 flex-wrap align-items-center">
                        <!-- Inactive ç‹€æ…‹ -->
                        <div class="rotating-border-spotlight"
                             style="padding: 1.5rem 2rem; background: var(--bg-card); border-radius: var(--radius-md);">
                            <h5 style="margin: 0; color: var(--text-primary);">Inactive State</h5>
                            <p style="margin: 0.5rem 0 0 0; color: var(--text-secondary); font-size: 0.875rem;">æ²’æœ‰æ—‹è½‰æ•ˆæœ</p>
                        </div>

                        <!-- Active ç‹€æ…‹ -->
                        <div class="rotating-border-spotlight active"
                             style="padding: 1.5rem 2rem; background: var(--bg-card); border-radius: var(--radius-md);">
                            <h5 style="margin: 0; color: var(--text-primary);">Active State</h5>
                            <p style="margin: 0.5rem 0 0 0; color: var(--text-secondary); font-size: 0.875rem;">æ­£åœ¨æ—‹è½‰</p>
                        </div>
                    </div>
                </div>
                <pre class="ds-code"><code>&lt;div class="rotating-border-spotlight active"&gt;
  &lt;!-- å…§å®¹ --&gt;
&lt;/div&gt;</code></pre>
            </div>

            <!-- æ‡‰ç”¨å ´æ™¯ -->
            <div class="ds-subsection">
                <h3>Use Cases</h3>
                <p class="ds-desc">å¯¦éš›æ‡‰ç”¨å ´æ™¯å±•ç¤º</p>

                <!-- å ´æ™¯ 1: Card -->
                <h4 style="margin-top: 1.5rem; margin-bottom: 1rem; font-size: 1rem; font-weight: 600;">1. Card with Local Match</h4>
                <div class="ds-card-demo">
                    <div class="rotating-border-spotlight active"
                         style="max-width: 280px; background: var(--bg-card); border-radius: var(--fluent-radius-xl, 12px); overflow: hidden; box-shadow: var(--fluent-shadow-4);">
                        <div style="aspect-ratio: 16/9; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); position: relative;">
                            <img src="/static/img/demo/sone-103.jpg" alt="cover" style="width: 100%; height: 100%; object-fit: cover;">
                            <span style="position: absolute; top: 0.5rem; right: 0.5rem; background: rgba(90, 200, 250, 0.9); color: #fff; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600;">æœ¬åœ°</span>
                        </div>
                        <div style="padding: 1rem;">
                            <div style="font-weight: 600; color: var(--accent); margin-bottom: 0.25rem;">SONE-103</div>
                            <div style="font-size: 0.875rem; color: var(--text-secondary);">2024-01-15</div>
                        </div>
                    </div>
                </div>

                <!-- å ´æ™¯ 2: Navigation Link -->
                <h4 style="margin-top: 1.5rem; margin-bottom: 1rem; font-size: 1rem; font-weight: 600;">2. Sidebar Navigation Link</h4>
                <div class="ds-card-demo">
                    <div style="background: var(--bg-card); padding: 1rem; border-radius: var(--radius-md); max-width: 200px;">
                        <nav style="display: flex; flex-direction: column; gap: 0.25rem;">
                            <a class="nav-link" href="#" style="color: var(--text-secondary); padding: 0.75rem; border-radius: 0.25rem; display: flex; align-items: center; text-decoration: none;">
                                <i class="bi bi-search" style="width: 24px;"></i>
                                <span style="margin-left: 0.5rem;">æœå°‹</span>
                            </a>
                            <a class="nav-link rotating-border-spotlight active" href="#" style="color: var(--text-secondary); padding: 0.75rem; border-radius: 0.25rem; display: flex; align-items: center; text-decoration: none; background-color: rgba(255, 255, 255, 0.1);">
                                <i class="bi bi-collection-play" style="width: 24px;"></i>
                                <span style="margin-left: 0.5rem;">ç€è¦½ (æœ‰å…§å®¹)</span>
                            </a>
                            <a class="nav-link" href="#" style="color: rgba(255, 255, 255, 0.8); padding: 0.75rem; border-radius: 0.25rem; display: flex; align-items: center; text-decoration: none;">
                                <i class="bi bi-gear" style="width: 24px;"></i>
                                <span style="margin-left: 0.5rem;">è¨­å®š</span>
                            </a>
                        </nav>
                    </div>
                </div>

                <!-- å ´æ™¯ 3: Info Section -->
                <h4 style="margin-top: 1.5rem; margin-bottom: 1rem; font-size: 1rem; font-weight: 600;">3. Search Result Info Section</h4>
                <div class="ds-card-demo">
                    <div class="rotating-border-spotlight active"
                         style="max-width: 600px; background: var(--bg-card); border-radius: var(--radius-md); padding: 1.5rem; box-shadow: var(--fluent-shadow-4);">
                        <div style="display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem;">
                            <i class="bi bi-folder-check" style="font-size: 1.5rem; color: var(--accent);"></i>
                            <h4 style="margin: 0; font-size: 1.125rem; font-weight: 600; color: var(--text-primary);">æœ¬åœ°è³‡æ–™åº«åŒ¹é…</h4>
                        </div>
                        <div style="padding-left: 2.25rem;">
                            <div style="margin-bottom: 0.5rem; color: var(--text-secondary); font-size: 0.875rem;">
                                <span style="color: var(--text-primary); font-weight: 600;">æª”æ¡ˆï¼š</span>
                                /Users/username/Videos/SONE-103.mp4
                            </div>
                            <div style="color: var(--text-secondary); font-size: 0.875rem;">
                                <span style="color: var(--text-primary); font-weight: 600;">å¤§å°ï¼š</span>
                                2.4 GB
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æŠ€è¡“è¦æ ¼ -->
            <div class="ds-subsection">
                <h3>Technical Specs</h3>
                <div class="ds-card-demo">
                    <table class="table table-sm" style="max-width: 600px; margin: 0;">
                        <tbody>
                            <tr>
                                <td style="width: 30%; font-weight: 600; color: var(--text-primary);">æ—‹è½‰é€Ÿåº¦</td>
                                <td style="color: var(--text-secondary);">2.5 ç§’/åœˆ</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">å…‰é»è§’åº¦</td>
                                <td style="color: var(--text-secondary);">30Â° æ ¸å¿ƒ + 30Â° æ‹–å°¾ = 60Â° ç¸½é•·</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Light Mode é€æ˜åº¦</td>
                                <td style="color: var(--text-secondary);">0.6 (æ ¸å¿ƒ) / 0.3 (æ‹–å°¾)</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">Dark Mode é€æ˜åº¦</td>
                                <td style="color: var(--text-secondary);">0.7 (æ ¸å¿ƒ) / 0.4 (æ‹–å°¾)</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">é¡è‰²ä¾†æº</td>
                                <td style="color: var(--text-secondary);">å»¶çºŒ <code>--accent</code> è—è‰²ç³»</td>
                            </tr>
                            <tr>
                                <td style="font-weight: 600; color: var(--text-primary);">ç€è¦½å™¨æ”¯æ´</td>
                                <td style="color: var(--text-secondary);">Chrome 85+, Edge 85+, Safari 15.4+, Firefox 128+</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- è®Šé«”é¸é … -->
            <div class="ds-subsection">
                <h3>Speed Variants (Optional)</h3>
                <p class="ds-desc">å¯é¸çš„é€Ÿåº¦è®Šé«”ï¼Œç”¨æ–¼ä¸åŒå¼·èª¿ç¨‹åº¦</p>
                <div class="ds-card-demo">
                    <div class="d-flex gap-3 flex-wrap">
                        <div class="rotating-border-spotlight speed-slow active"
                             style="padding: 1rem 1.5rem; background: var(--bg-card); border-radius: var(--radius-md);">
                            <small style="color: var(--text-muted);">Slow (4s)</small>
                        </div>
                        <div class="rotating-border-spotlight active"
                             style="padding: 1rem 1.5rem; background: var(--bg-card); border-radius: var(--radius-md);">
                            <small style="color: var(--text-muted);">Normal (2.5s)</small>
                        </div>
                        <div class="rotating-border-spotlight speed-fast active"
                             style="padding: 1rem 1.5rem; background: var(--bg-card); border-radius: var(--radius-md);">
                            <small style="color: var(--text-muted);">Fast (1.5s)</small>
                        </div>
                    </div>
                </div>
                <pre class="ds-code"><code>&lt;!-- æ…¢é€Ÿæ—‹è½‰ --&gt;
&lt;div class="rotating-border-spotlight speed-slow active"&gt;...&lt;/div&gt;

&lt;!-- å¿«é€Ÿæ—‹è½‰ --&gt;
&lt;div class="rotating-border-spotlight speed-fast active"&gt;...&lt;/div&gt;</code></pre>
            </div>

            <!-- ç„¡éšœç¤™èˆ‡é™ç´š -->
            <div class="ds-subsection">
                <h3>Accessibility & Fallback</h3>
                <div class="alert alert-info" role="alert" style="margin-bottom: 1rem;">
                    <i class="bi bi-info-circle"></i> <strong>prefers-reduced-motion</strong>ï¼šå°Šé‡ä½¿ç”¨è€…åå¥½ï¼Œåœç”¨å‹•ç•«æ”¹ç‚ºéœæ…‹ç™¼å…‰é‚Šæ¡†
                </div>
                <div class="alert alert-warning" role="alert">
                    <i class="bi bi-exclamation-triangle"></i> <strong>ç€è¦½å™¨é™ç´š</strong>ï¼šä¸æ”¯æ´ <code>conic-gradient</code> æ™‚é™ç´šç‚ºéœæ…‹ <code>box-shadow</code> é‚Šæ¡†
                </div>
            </div>
        </section>

        <!-- å€å¡Š 11: Feedback (glass æ¨£å¼) -->
        <section id="feedback" class="ds-section glass">
            <h2>Feedback</h2>

            <div class="ds-subsection">
                <h3>Alert / Badge</h3>
                <div class="ds-feedback-row">
                    <div class="alert alert-warning" role="alert">
                        <i class="bi bi-exclamation-triangle"></i> è­¦å‘Šè¨Šæ¯
                    </div>
                    <span class="badge bg-primary">Badge</span>
                    <span class="badge bg-danger">éŒ¯èª¤</span>
                    <span class="badge bg-success">æˆåŠŸ</span>
                </div>
            </div>

            <div class="ds-subsection">
                <h3>Toast</h3>
                <div class="ds-toast-demo">
                    <div class="toast-msg show">é€™æ˜¯ä¸€å€‹ Toast è¨Šæ¯</div>
                </div>
                <div class="ds-toast-demo">
                    <div class="source-toast-inline show">å·²è¤‡è£½</div>
                </div>
            </div>

            <div class="ds-subsection">
                <h3>Progress Bar</h3>
                <div class="ds-progress-demo">
                    <div class="detail-progress show" style="position: relative;">
                        <div class="detail-bar" style="width: 65%;"></div>
                        <span class="detail-text">65 / 100</span>
                    </div>
                </div>
                <div class="ds-progress-demo">
                    <div class="batch-progress">
                        <div class="batch-progress-bar">
                            <div class="batch-progress-fill" style="width: 40%;"></div>
                        </div>
                        <small class="batch-progress-text">è™•ç†ä¸­ 4/10</small>
                    </div>
                </div>
            </div>

            <div class="ds-subsection">
                <h3>Spinner</h3>
                <div class="ds-feedback-row">
                    <span class="spinner-border spinner-border-sm"></span>
                    <span class="spinner-border"></span>
                    <button class="btn btn-primary" disabled>
                        <span class="spinner-border spinner-border-sm"></span> è¼‰å…¥ä¸­...
                    </button>
                </div>
            </div>
        </section>
    </div>
</div>

<!-- TOC Active State Script + Dynamic Color Hex -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // TOC Active State
    const tocLinks = document.querySelectorAll('.ds-toc a');
    const sections = document.querySelectorAll('.ds-section');

    function updateActiveLink() {
        let current = '';
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            if (window.scrollY >= sectionTop - 100) {
                current = section.getAttribute('id');
            }
        });

        tocLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === '#' + current) {
                link.classList.add('active');
            }
        });
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();

    // Dynamic Color Hex Values
    function colorToHex(colorValue) {
        // Create a temporary element to get computed RGB
        const temp = document.createElement('div');
        temp.style.color = colorValue;
        temp.style.visibility = 'hidden';
        temp.style.position = 'absolute';
        document.body.appendChild(temp);
        const computed = getComputedStyle(temp).color;
        document.body.removeChild(temp);

        // Match both rgb() and rgba() formats
        // Modern browsers may return "rgba(r, g, b, a)" or "rgb(r g b / a)"
        const rgbaMatch = computed.match(/rgba?\((\d+)[,\s]+(\d+)[,\s]+(\d+)(?:[,\s/]+([0-9.]+))?\)/);

        if (rgbaMatch) {
            const r = parseInt(rgbaMatch[1]);
            const g = parseInt(rgbaMatch[2]);
            const b = parseInt(rgbaMatch[3]);
            const a = rgbaMatch[4] !== undefined ? parseFloat(rgbaMatch[4]) : 1;

            const rHex = r.toString(16).padStart(2, '0');
            const gHex = g.toString(16).padStart(2, '0');
            const bHex = b.toString(16).padStart(2, '0');

            // If alpha is not 1, show with alpha indicator
            if (a < 0.999) {
                const alphaPercent = Math.round(a * 100);
                return `#${rHex}${gHex}${bHex} ${alphaPercent}%`;
            }

            return `#${rHex}${gHex}${bHex}`;
        }

        // Handle color(srgb r g b / a) format (modern browsers)
        const srgbMatch = computed.match(/color\(srgb\s+([0-9.]+)\s+([0-9.]+)\s+([0-9.]+)(?:\s*\/\s*([0-9.]+))?\)/);

        if (srgbMatch) {
            const r = Math.round(parseFloat(srgbMatch[1]) * 255);
            const g = Math.round(parseFloat(srgbMatch[2]) * 255);
            const b = Math.round(parseFloat(srgbMatch[3]) * 255);
            const a = srgbMatch[4] !== undefined ? parseFloat(srgbMatch[4]) : 1;

            const rHex = r.toString(16).padStart(2, '0');
            const gHex = g.toString(16).padStart(2, '0');
            const bHex = b.toString(16).padStart(2, '0');

            if (a < 0.999) {
                const alphaPercent = Math.round(a * 100);
                return `#${rHex}${gHex}${bHex} ${alphaPercent}%`;
            }

            return `#${rHex}${gHex}${bHex}`;
        }

        // Fallback: return original value if conversion fails
        return colorValue;
    }

    function updateColorHex() {
        const style = getComputedStyle(document.documentElement);
        document.querySelectorAll('.ds-color-hex[data-var]').forEach(el => {
            const varName = el.dataset.var;
            const value = style.getPropertyValue(varName).trim();

            // Handle different color formats
            if (value.startsWith('rgb')) {
                // Direct RGB/RGBA
                const match = value.match(/rgba?\((\d+)[,\s]+(\d+)[,\s]+(\d+)/);
                if (match) {
                    const r = parseInt(match[1]).toString(16).padStart(2, '0');
                    const g = parseInt(match[2]).toString(16).padStart(2, '0');
                    const b = parseInt(match[3]).toString(16).padStart(2, '0');
                    el.textContent = `#${r}${g}${b}`;
                }
            } else if (value.startsWith('oklch') || value.startsWith('color-mix')) {
                // OKLCH or color-mix: use temporary element
                el.textContent = colorToHex(value);
            } else if (value.startsWith('#')) {
                // Already HEX
                el.textContent = value;
            } else {
                // Unknown format: display as-is
                el.textContent = value;
            }
        });
    }

    // Initial update
    updateColorHex();

    // Watch for theme changes via MutationObserver on html element
    const htmlEl = document.documentElement;
    const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
            if (mutation.attributeName === 'data-theme') {
                // Delay to let CSS variables update
                setTimeout(updateColorHex, 50);
            }
        });
    });
    observer.observe(htmlEl, { attributes: true, attributeFilter: ['data-theme'] });
});
</script>
{% endblock %}
